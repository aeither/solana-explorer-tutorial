{"version":3,"sources":["../../src/use-event-listeners.ts"],"names":["useEventListeners","listeners","React","useRef","Map","currentListeners","current","add","useCallback","el","type","listener","options","set","addEventListener","remove","removeEventListener","useEffect","forEach","value","key"],"mappings":";;;;;AAAA;;;;;;AA6BO,SAASA,iBAAT,GAA6C;AAClD,MAAMC,SAAS,GAAGC,KAAK,CAACC,MAAN,CAAa,IAAIC,GAAJ,EAAb,CAAlB;AACA,MAAMC,gBAAgB,GAAGJ,SAAS,CAACK,OAAnC;AAEA,MAAMC,GAAG,GAAGL,KAAK,CAACM,WAAN,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,QAAX,EAAqBC,OAArB,EAAiC;AAC7DX,IAAAA,SAAS,CAACK,OAAV,CAAkBO,GAAlB,CAAsBF,QAAtB,EAAgC;AAAED,MAAAA,IAAI,EAAJA,IAAF;AAAQD,MAAAA,EAAE,EAAFA,EAAR;AAAYG,MAAAA,OAAO,EAAPA;AAAZ,KAAhC;AACAH,IAAAA,EAAE,CAACK,gBAAH,CAAoBJ,IAApB,EAA0BC,QAA1B,EAAoCC,OAApC;AACD,GAHW,EAGT,EAHS,CAAZ;AAKA,MAAMG,MAAM,GAAGb,KAAK,CAACM,WAAN,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,QAAX,EAAqBC,OAArB,EAAiC;AAChEH,IAAAA,EAAE,CAACO,mBAAH,CAAuBN,IAAvB,EAA6BC,QAA7B,EAAuCC,OAAvC;AACAX,IAAAA,SAAS,CAACK,OAAV,WAAyBK,QAAzB;AACD,GAHc,EAGZ,EAHY,CAAf;AAKAT,EAAAA,KAAK,CAACe,SAAN,CACE;AAAA,WAAM,YAAM;AACVZ,MAAAA,gBAAgB,CAACa,OAAjB,CAAyB,UAACC,KAAD,EAAQC,GAAR,EAAgB;AACvCL,QAAAA,MAAM,CAACI,KAAK,CAACV,EAAP,EAAWU,KAAK,CAACT,IAAjB,EAAuBU,GAAvB,EAA4BD,KAAK,CAACP,OAAlC,CAAN;AACD,OAFD;AAGD,KAJD;AAAA,GADF,EAME,CAACG,MAAD,EAASV,gBAAT,CANF;AASA,SAAO;AAAEE,IAAAA,GAAG,EAAHA,GAAF;AAAOQ,IAAAA,MAAM,EAANA;AAAP,GAAP;AACD","sourcesContent":["import * as React from \"react\"\n\ninterface EventListeners {\n  add<K extends keyof DocumentEventMap>(\n    el: EventTarget,\n    type: K,\n    listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  add(\n    el: EventTarget,\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  remove<K extends keyof DocumentEventMap>(\n    el: EventTarget,\n    type: K,\n    listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void\n  remove(\n    el: EventTarget,\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void\n}\n\nexport function useEventListeners(): EventListeners {\n  const listeners = React.useRef(new Map())\n  const currentListeners = listeners.current\n\n  const add = React.useCallback((el, type, listener, options) => {\n    listeners.current.set(listener, { type, el, options })\n    el.addEventListener(type, listener, options)\n  }, [])\n\n  const remove = React.useCallback((el, type, listener, options) => {\n    el.removeEventListener(type, listener, options)\n    listeners.current.delete(listener)\n  }, [])\n\n  React.useEffect(\n    () => () => {\n      currentListeners.forEach((value, key) => {\n        remove(value.el, value.type, key, value.options)\n      })\n    },\n    [remove, currentListeners],\n  )\n\n  return { add, remove }\n}\n"],"file":"use-event-listeners.js"}
{"version":3,"sources":["../../src/utils.ts"],"names":["sortNodes","nodes","sort","a","b","compare","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","Error","isElement","el","nodeType","ELEMENT_NODE","getNextIndex","current","max","loop","next","getPrevIndex","useSafeLayoutEffect","window","useLayoutEffect","useEffect","cast","value"],"mappings":";;;;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACO,SAASA,SAAT,CAAmBC,KAAnB,EAAkC;AACvC,SAAOA,KAAK,CAACC,IAAN,CAAW,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC1B,QAAMC,OAAO,GAAGF,CAAC,CAACG,uBAAF,CAA0BF,CAA1B,CAAhB;;AAEA,QACEC,OAAO,GAAGE,IAAI,CAACC,2BAAf,IACAH,OAAO,GAAGE,IAAI,CAACE,8BAFjB,EAGE;AACA;AACA,aAAO,CAAC,CAAR;AACD;;AAED,QACEJ,OAAO,GAAGE,IAAI,CAACG,2BAAf,IACAL,OAAO,GAAGE,IAAI,CAACI,0BAFjB,EAGE;AACA;AACA,aAAO,CAAP;AACD;;AAED,QACEN,OAAO,GAAGE,IAAI,CAACK,8BAAf,IACAP,OAAO,GAAGE,IAAI,CAACM,yCAFjB,EAGE;AACA,YAAMC,KAAK,CAAC,8BAAD,CAAX;AACD,KALD,MAKO;AACL,aAAO,CAAP;AACD;AACF,GA3BM,CAAP;AA4BD;;AAEM,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,EAAD;AAAA,SACvB,OAAOA,EAAP,IAAa,QAAb,IAAyB,cAAcA,EAAvC,IAA6CA,EAAE,CAACC,QAAH,KAAgBV,IAAI,CAACW,YAD3C;AAAA,CAAlB;;;;AAGA,SAASC,YAAT,CAAsBC,OAAtB,EAAuCC,GAAvC,EAAoDC,IAApD,EAAmE;AACxE,MAAIC,IAAI,GAAGH,OAAO,GAAG,CAArB;AACA,MAAIE,IAAI,IAAIC,IAAI,IAAIF,GAApB,EAAyBE,IAAI,GAAG,CAAP;AACzB,SAAOA,IAAP;AACD;;AAEM,SAASC,YAAT,CAAsBJ,OAAtB,EAAuCC,GAAvC,EAAoDC,IAApD,EAAmE;AACxE,MAAIC,IAAI,GAAGH,OAAO,GAAG,CAArB;AACA,MAAIE,IAAI,IAAIC,IAAI,GAAG,CAAnB,EAAsBA,IAAI,GAAGF,GAAP;AACtB,SAAOE,IAAP;AACD;;AAEM,IAAME,mBAAmB,GAC9B,OAAOC,MAAP,KAAkB,WAAlB,GAAgCC,sBAAhC,GAAkDC,gBAD7C;;;AAGA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAAIC,KAAJ;AAAA,SAAmBA,KAAnB;AAAA,CAAb","sourcesContent":["import { useEffect, useLayoutEffect } from \"react\"\n\n/**\n * Sort an array of DOM nodes according to the HTML tree order\n * @see http://www.w3.org/TR/html5/infrastructure.html#tree-order\n */\nexport function sortNodes(nodes: Node[]) {\n  return nodes.sort((a, b) => {\n    const compare = a.compareDocumentPosition(b)\n\n    if (\n      compare & Node.DOCUMENT_POSITION_FOLLOWING ||\n      compare & Node.DOCUMENT_POSITION_CONTAINED_BY\n    ) {\n      // a < b\n      return -1\n    }\n\n    if (\n      compare & Node.DOCUMENT_POSITION_PRECEDING ||\n      compare & Node.DOCUMENT_POSITION_CONTAINS\n    ) {\n      // a > b\n      return 1\n    }\n\n    if (\n      compare & Node.DOCUMENT_POSITION_DISCONNECTED ||\n      compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC\n    ) {\n      throw Error(\"Cannot sort the given nodes.\")\n    } else {\n      return 0\n    }\n  })\n}\n\nexport const isElement = (el: any): el is HTMLElement =>\n  typeof el == \"object\" && \"nodeType\" in el && el.nodeType === Node.ELEMENT_NODE\n\nexport function getNextIndex(current: number, max: number, loop: boolean) {\n  let next = current + 1\n  if (loop && next >= max) next = 0\n  return next\n}\n\nexport function getPrevIndex(current: number, max: number, loop: boolean) {\n  let next = current - 1\n  if (loop && next < 0) next = max\n  return next\n}\n\nexport const useSafeLayoutEffect =\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect\n\nexport const cast = <T>(value: any) => value as T\n"],"file":"utils.js"}
{"ast":null,"code":"import _slicedToArray from \"/Users/lin/Documents/Projects/solana-explorer-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { isHTMLElement } from \"./dom\";\nimport { isFocusable, isTabbable } from \"./tabbable\";\nvar focusableElList = [\"input:not([disabled])\", \"select:not([disabled])\", \"textarea:not([disabled])\", \"embed\", \"iframe\", \"object\", \"a[href]\", \"area[href]\", \"button:not([disabled])\", \"[tabindex]\", \"audio[controls]\", \"video[controls]\", \"*[tabindex]:not([aria-disabled])\", \"*[contenteditable]\"];\nvar focusableElSelector = focusableElList.join();\nexport function getAllFocusable(container) {\n  var focusableEls = Array.from(container.querySelectorAll(focusableElSelector));\n  focusableEls.unshift(container);\n  return focusableEls.filter(isFocusable).filter(function (el) {\n    return window.getComputedStyle(el).display !== \"none\";\n  });\n}\nexport function getFirstFocusable(container) {\n  var allFocusable = getAllFocusable(container);\n  return allFocusable.length ? allFocusable[0] : null;\n}\nexport function getAllTabbable(container, fallbackToFocusable) {\n  var allFocusable = Array.from(container.querySelectorAll(focusableElSelector));\n  var allTabbable = allFocusable.filter(isTabbable);\n\n  if (isTabbable(container)) {\n    allTabbable.unshift(container);\n  }\n\n  if (!allTabbable.length && fallbackToFocusable) {\n    return allFocusable;\n  }\n\n  return allTabbable;\n}\nexport function getFirstTabbableIn(container, fallbackToFocusable) {\n  var _getAllTabbable = getAllTabbable(container, fallbackToFocusable),\n      _getAllTabbable2 = _slicedToArray(_getAllTabbable, 1),\n      first = _getAllTabbable2[0];\n\n  return first || null;\n}\nexport function getLastTabbableIn(container, fallbackToFocusable) {\n  var allTabbable = getAllTabbable(container, fallbackToFocusable);\n  return allTabbable[allTabbable.length - 1] || null;\n}\nexport function getNextTabbable(container, fallbackToFocusable) {\n  var allFocusable = getAllFocusable(container);\n  var index = allFocusable.indexOf(document.activeElement);\n  var slice = allFocusable.slice(index + 1);\n  return slice.find(isTabbable) || allFocusable.find(isTabbable) || (fallbackToFocusable ? slice[0] : null);\n}\nexport function getPreviousTabbable(container, fallbackToFocusable) {\n  var allFocusable = getAllFocusable(container).reverse();\n  var index = allFocusable.indexOf(document.activeElement);\n  var slice = allFocusable.slice(index + 1);\n  return slice.find(isTabbable) || allFocusable.find(isTabbable) || (fallbackToFocusable ? slice[0] : null);\n}\nexport function focusNextTabbable(container, fallbackToFocusable) {\n  var nextTabbable = getNextTabbable(container, fallbackToFocusable);\n\n  if (nextTabbable && isHTMLElement(nextTabbable)) {\n    nextTabbable.focus();\n  }\n}\nexport function focusPreviousTabbable(container, fallbackToFocusable) {\n  var previousTabbable = getPreviousTabbable(container, fallbackToFocusable);\n\n  if (previousTabbable && isHTMLElement(previousTabbable)) {\n    previousTabbable.focus();\n  }\n}\n\nfunction matches(element, selectors) {\n  if (\"matches\" in element) return element.matches(selectors);\n  if (\"msMatchesSelector\" in element) return element.msMatchesSelector(selectors);\n  return element.webkitMatchesSelector(selectors);\n}\n\nexport function closest(element, selectors) {\n  if (\"closest\" in element) return element.closest(selectors);\n\n  do {\n    if (matches(element, selectors)) return element;\n    element = element.parentElement || element.parentNode;\n  } while (element !== null && element.nodeType === 1);\n\n  return null;\n}","map":{"version":3,"sources":["../../src/dom-query.ts"],"names":["focusableElList","focusableElSelector","focusableEls","Array","container","el","window","allFocusable","getAllFocusable","allTabbable","isTabbable","getAllTabbable","first","index","document","slice","fallbackToFocusable","nextTabbable","getNextTabbable","isHTMLElement","previousTabbable","getPreviousTabbable","element","matches"],"mappings":"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","sourcesContent":["import { isHTMLElement } from \"./dom\"\nimport { isFocusable, isTabbable } from \"./tabbable\"\n\nconst focusableElList = [\n  \"input:not([disabled])\",\n  \"select:not([disabled])\",\n  \"textarea:not([disabled])\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"a[href]\",\n  \"area[href]\",\n  \"button:not([disabled])\",\n  \"[tabindex]\",\n  \"audio[controls]\",\n  \"video[controls]\",\n  \"*[tabindex]:not([aria-disabled])\",\n  \"*[contenteditable]\",\n]\n\nconst focusableElSelector = focusableElList.join()\n\nexport function getAllFocusable<T extends HTMLElement>(container: T) {\n  const focusableEls = Array.from(\n    container.querySelectorAll<T>(focusableElSelector),\n  )\n  focusableEls.unshift(container)\n  return focusableEls\n    .filter(isFocusable)\n    .filter((el) => window.getComputedStyle(el).display !== \"none\")\n}\n\nexport function getFirstFocusable<T extends HTMLElement>(container: T) {\n  const allFocusable = getAllFocusable(container)\n  return allFocusable.length ? allFocusable[0] : null\n}\n\nexport function getAllTabbable<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n) {\n  const allFocusable = Array.from(\n    container.querySelectorAll<T>(focusableElSelector),\n  )\n  const allTabbable = allFocusable.filter(isTabbable)\n\n  if (isTabbable(container)) {\n    allTabbable.unshift(container)\n  }\n\n  if (!allTabbable.length && fallbackToFocusable) {\n    return allFocusable\n  }\n  return allTabbable\n}\n\nexport function getFirstTabbableIn<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n): T | null {\n  const [first] = getAllTabbable(container, fallbackToFocusable)\n  return first || null\n}\n\nexport function getLastTabbableIn<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n): T | null {\n  const allTabbable = getAllTabbable(container, fallbackToFocusable)\n  return allTabbable[allTabbable.length - 1] || null\n}\n\nexport function getNextTabbable<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n): T | null {\n  const allFocusable = getAllFocusable(container)\n  const index = allFocusable.indexOf(document.activeElement as T)\n  const slice = allFocusable.slice(index + 1)\n  return (\n    slice.find(isTabbable) ||\n    allFocusable.find(isTabbable) ||\n    (fallbackToFocusable ? slice[0] : null)\n  )\n}\n\nexport function getPreviousTabbable<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n): T | null {\n  const allFocusable = getAllFocusable(container).reverse()\n  const index = allFocusable.indexOf(document.activeElement as T)\n  const slice = allFocusable.slice(index + 1)\n  return (\n    slice.find(isTabbable) ||\n    allFocusable.find(isTabbable) ||\n    (fallbackToFocusable ? slice[0] : null)\n  )\n}\n\nexport function focusNextTabbable<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n) {\n  const nextTabbable = getNextTabbable(container, fallbackToFocusable)\n  if (nextTabbable && isHTMLElement(nextTabbable)) {\n    nextTabbable.focus()\n  }\n}\n\nexport function focusPreviousTabbable<T extends HTMLElement>(\n  container: T,\n  fallbackToFocusable?: boolean,\n) {\n  const previousTabbable = getPreviousTabbable(container, fallbackToFocusable)\n  if (previousTabbable && isHTMLElement(previousTabbable)) {\n    previousTabbable.focus()\n  }\n}\n\nfunction matches(element: Element, selectors: string): boolean {\n  if (\"matches\" in element) return element.matches(selectors)\n  if (\"msMatchesSelector\" in element)\n    return (element as any).msMatchesSelector(selectors)\n  return (element as any).webkitMatchesSelector(selectors)\n}\n\nexport function closest<T extends HTMLElement>(element: T, selectors: string) {\n  if (\"closest\" in element) return element.closest(selectors)\n  do {\n    if (matches(element, selectors)) return element\n    element = (element.parentElement || element.parentNode) as any\n  } while (element !== null && element.nodeType === 1)\n  return null\n}\n"]},"metadata":{},"sourceType":"module"}
{"version":3,"sources":["../../src/use-clickable.ts"],"names":["isValidElement","event","element","target","tagName","isContentEditable","useClickable","props","htmlRef","ref","isDisabled","isFocusable","clickOnEnter","clickOnSpace","onMouseDown","onMouseUp","onClick","onKeyDown","onKeyUp","tabIndexProp","tabIndex","onMouseOver","onMouseLeave","htmlProps","React","useState","isButton","setIsButton","isPressed","setIsPressed","listeners","refCallback","node","trulyDisabled","handleClick","useCallback","stopPropagation","preventDefault","self","currentTarget","focus","onDocumentKeyUp","e","remove","document","handleKeyDown","defaultPrevented","metaKey","nativeEvent","shouldClickOnEnter","key","shouldClickOnSpace","click","add","handleKeyUp","onDocumentMouseUp","button","handleMouseDown","preventScroll","handleMouseUp","handleMouseOver","handleMouseLeave","type","undefined","disabled","role"],"mappings":"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","sourcesContent":["import { dataAttr, isRightClick } from \"@chakra-ui/utils\"\nimport { mergeRefs } from \"@chakra-ui/react-utils\"\nimport * as React from \"react\"\nimport { useEventListeners } from \"./use-event-listeners\"\n\nexport interface UseClickableProps extends React.HTMLAttributes<HTMLElement> {\n  /**\n   * If `true`, the element will be disabled.\n   * It will set the `disabled` HTML attribute\n   */\n  isDisabled?: boolean\n  /**\n   * If `true` and isDisabled, the element will\n   * have only `aria-disabled` set to `true`\n   */\n  isFocusable?: boolean\n  /**\n   * Whether or not trigger click on pressing `Enter`.\n   */\n  clickOnEnter?: boolean\n  /**\n   * Whether or not trigger click on pressing `Space`.\n   */\n  clickOnSpace?: boolean\n  /**\n   * The ref for the element\n   */\n  ref?: React.Ref<HTMLElement>\n}\n\nfunction isValidElement(event: KeyboardEvent): boolean {\n  const element = event.target as HTMLElement\n  const { tagName, isContentEditable } = element\n  return (\n    tagName !== \"INPUT\" && tagName !== \"TEXTAREA\" && isContentEditable !== true\n  )\n}\n\n/**\n * useClickable implements all the interactions of a native `button`\n * component with support for making it focusable even if it is disabled.\n *\n * It can be used with both native button elements or other elements (like `div`).\n */\nexport function useClickable(props: UseClickableProps = {}) {\n  const {\n    ref: htmlRef,\n    isDisabled,\n    isFocusable,\n    clickOnEnter = true,\n    clickOnSpace = true,\n    onMouseDown,\n    onMouseUp,\n    onClick,\n    onKeyDown,\n    onKeyUp,\n    tabIndex: tabIndexProp,\n    onMouseOver,\n    onMouseLeave,\n    ...htmlProps\n  } = props\n  /**\n   * We'll use this to track if the element is a button element\n   */\n  const [isButton, setIsButton] = React.useState(true)\n\n  /**\n   * For custom button implementation, we'll use this to track when\n   * we mouse down on the button, to enable use style its \":active\" style\n   */\n  const [isPressed, setIsPressed] = React.useState(false)\n\n  const listeners = useEventListeners()\n\n  /**\n   * The ref callback that fires as soon as the dom node is ready\n   */\n  const refCallback = (node: any) => {\n    if (!node) return\n    if (node.tagName !== \"BUTTON\") {\n      setIsButton(false)\n    }\n  }\n\n  const tabIndex = isButton ? tabIndexProp : tabIndexProp || 0\n  const trulyDisabled = isDisabled && !isFocusable\n\n  const handleClick = React.useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      if (isDisabled) {\n        event.stopPropagation()\n        event.preventDefault()\n        return\n      }\n\n      const self = event.currentTarget as HTMLElement\n      self.focus()\n      onClick?.(event)\n    },\n    [isDisabled, onClick],\n  )\n\n  const onDocumentKeyUp = React.useCallback(\n    (e: KeyboardEvent) => {\n      if (isPressed && isValidElement(e)) {\n        e.preventDefault()\n        e.stopPropagation()\n\n        setIsPressed(false)\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        listeners.remove(document, \"keyup\", onDocumentKeyUp, false)\n      }\n    },\n    [isPressed, listeners],\n  )\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLElement>) => {\n      onKeyDown?.(event)\n\n      if (isDisabled || event.defaultPrevented || event.metaKey) {\n        return\n      }\n\n      if (!isValidElement(event.nativeEvent) || isButton) return\n\n      const shouldClickOnEnter = clickOnEnter && event.key === \"Enter\"\n      const shouldClickOnSpace = clickOnSpace && event.key === \" \"\n\n      if (shouldClickOnSpace) {\n        event.preventDefault()\n        setIsPressed(true)\n      }\n\n      if (shouldClickOnEnter) {\n        event.preventDefault()\n        const self = event.currentTarget as HTMLElement\n        self.click()\n      }\n\n      listeners.add(document, \"keyup\", onDocumentKeyUp, false)\n    },\n    [\n      isDisabled,\n      isButton,\n      onKeyDown,\n      clickOnEnter,\n      clickOnSpace,\n      listeners,\n      onDocumentKeyUp,\n    ],\n  )\n\n  const handleKeyUp = React.useCallback(\n    (event: React.KeyboardEvent<HTMLElement>) => {\n      onKeyUp?.(event)\n\n      if (isDisabled || event.defaultPrevented || event.metaKey) return\n\n      if (!isValidElement(event.nativeEvent) || isButton) return\n\n      const shouldClickOnSpace = clickOnSpace && event.key === \" \"\n\n      if (shouldClickOnSpace) {\n        event.preventDefault()\n        setIsPressed(false)\n\n        const self = event.currentTarget as HTMLElement\n        self.click()\n      }\n    },\n    [clickOnSpace, isButton, isDisabled, onKeyUp],\n  )\n\n  const onDocumentMouseUp = React.useCallback(\n    (event: MouseEvent) => {\n      if (event.button !== 0) return\n      setIsPressed(false)\n      listeners.remove(document, \"mouseup\", onDocumentMouseUp, false)\n    },\n    [listeners],\n  )\n\n  const handleMouseDown = React.useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      if (isRightClick(event)) return\n\n      if (isDisabled) {\n        event.stopPropagation()\n        event.preventDefault()\n        return\n      }\n\n      if (!isButton) {\n        setIsPressed(true)\n      }\n\n      const target = event.currentTarget as HTMLElement\n      target.focus({ preventScroll: true })\n\n      listeners.add(document, \"mouseup\", onDocumentMouseUp, false)\n\n      onMouseDown?.(event)\n    },\n    [isDisabled, isButton, onMouseDown, listeners, onDocumentMouseUp],\n  )\n\n  const handleMouseUp = React.useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      if (isRightClick(event)) return\n\n      if (!isButton) {\n        setIsPressed(false)\n      }\n\n      onMouseUp?.(event)\n    },\n    [onMouseUp, isButton],\n  )\n\n  const handleMouseOver = React.useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      if (isDisabled) {\n        event.preventDefault()\n        return\n      }\n\n      onMouseOver?.(event)\n    },\n    [isDisabled, onMouseOver],\n  )\n\n  const handleMouseLeave = React.useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      if (isPressed) {\n        event.preventDefault()\n        setIsPressed(false)\n      }\n      onMouseLeave?.(event)\n    },\n    [isPressed, onMouseLeave],\n  )\n\n  const ref = mergeRefs(htmlRef, refCallback)\n\n  if (isButton) {\n    return {\n      ...htmlProps,\n      ref,\n      type: \"button\" as React.ButtonHTMLAttributes<any>[\"type\"],\n      \"aria-disabled\": trulyDisabled ? undefined : isDisabled,\n      disabled: trulyDisabled,\n      onClick: handleClick,\n      onMouseDown,\n      onMouseUp,\n      onKeyUp,\n      onKeyDown,\n      onMouseOver,\n      onMouseLeave,\n    }\n  }\n\n  return {\n    ...htmlProps,\n    ref,\n    role: \"button\",\n    \"data-active\": dataAttr(isPressed),\n    \"aria-disabled\": isDisabled ? (\"true\" as const) : undefined,\n    tabIndex: trulyDisabled ? undefined : tabIndex,\n    onClick: handleClick,\n    onMouseDown: handleMouseDown,\n    onMouseUp: handleMouseUp,\n    onKeyUp: handleKeyUp,\n    onKeyDown: handleKeyDown,\n    onMouseOver: handleMouseOver,\n    onMouseLeave: handleMouseLeave,\n  }\n}\n\nexport type UseClickableReturn = ReturnType<typeof useClickable>\n"],"file":"use-clickable.js"}
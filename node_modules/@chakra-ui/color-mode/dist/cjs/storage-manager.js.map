{"version":3,"sources":["../../src/storage-manager.ts"],"names":["hasSupport","Storage","storageKey","localStorageManager","get","init","value","localStorage","getItem","error","__DEV__","console","log","set","setItem","type","cookieStorageManager","cookies","match","RegExp","document","cookie"],"mappings":";;;;;AAAA;;AAGA,IAAMA,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAM,OAAOC,OAAP,KAAmB,WAAzB;AAAA,CAAnB;;AACO,IAAMC,UAAU,GAAG,sBAAnB;;;AAUP;AACA;AACA;AACO,IAAMC,mBAAmC,GAAG;AACjDC,EAAAA,GADiD,eAC7CC,IAD6C,EACtC;AACT,QAAI,CAACL,UAAU,EAAf,EAAmB,OAAOK,IAAP;;AACnB,QAAI;AACF,UAAMC,MAAK,GAAGC,YAAY,CAACC,OAAb,CAAqBN,UAArB,CAAd;;AACA,aAAOI,MAAP,WAAOA,MAAP,GAAgBD,IAAhB;AACD,KAHD,CAGE,OAAOI,KAAP,EAAc;AACd,UAAIC,cAAJ,EAAa;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACD;;AACD,aAAOJ,IAAP;AACD;AACF,GAZgD;AAajDQ,EAAAA,GAbiD,eAa7CP,KAb6C,EAatC;AACT,QAAI,CAACN,UAAU,EAAf,EAAmB;;AACnB,QAAI;AACHO,MAAAA,YAAY,CAACO,OAAb,CAAqBZ,UAArB,EAAiCI,KAAjC;AACA,KAFD,CAEE,OAAOG,KAAP,EAAc;AACd,UAAIC,cAAJ,EAAa;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACD;AACF;AACF,GAtBgD;AAuBjDM,EAAAA,IAAI,EAAE;AAvB2C,CAA5C;AA0BP;AACA;AACA;;;;AACO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,OAAD;AAAA,MAACA,OAAD;AAACA,IAAAA,OAAD,GAAW,EAAX;AAAA;;AAAA,SAAmC;AACrEb,IAAAA,GADqE,eACjEC,IADiE,EAC1D;AACT,UAAMa,KAAK,GAAGD,OAAO,CAACC,KAAR,CAAc,IAAIC,MAAJ,WAAmBjB,UAAnB,cAAd,CAAd;;AAEA,UAAIgB,KAAJ,EAAW;AACT,eAAOA,KAAK,CAAC,CAAD,CAAZ;AACD;;AAED,aAAOb,IAAP;AACD,KAToE;AAUrEQ,IAAAA,GAVqE,eAUjEP,KAViE,EAU1D;AACTc,MAAAA,QAAQ,CAACC,MAAT,GAAqBnB,UAArB,SAAmCI,KAAnC;AACD,KAZoE;AAarES,IAAAA,IAAI,EAAE;AAb+D,GAAnC;AAAA,CAA7B","sourcesContent":["import { __DEV__ } from \"@chakra-ui/utils\"\nimport { ColorMode } from \"./color-mode.utils\"\n\nconst hasSupport = () => typeof Storage !== \"undefined\"\nexport const storageKey = \"chakra-ui-color-mode\"\n\ntype MaybeColorMode = ColorMode | undefined\n\nexport interface StorageManager {\n  get(init?: ColorMode): MaybeColorMode\n  set(value: ColorMode): void\n  type: \"cookie\" | \"localStorage\"\n}\n\n/**\n * Simple object to handle read-write to localStorage\n */\nexport const localStorageManager: StorageManager = {\n  get(init?) {\n    if (!hasSupport()) return init\n    try {\n      const value = localStorage.getItem(storageKey) as MaybeColorMode\n      return value ?? init\n    } catch (error) {\n      if (__DEV__) {\n        console.log(error)\n      }\n      return init\n    }\n  },\n  set(value) {\n    if (!hasSupport()) return\n    try {\n     localStorage.setItem(storageKey, value)\n    } catch (error) {\n      if (__DEV__) {\n        console.log(error)\n      }\n    }\n  },\n  type: \"localStorage\",\n}\n\n/**\n * Simple object to handle read-write to cookies\n */\nexport const cookieStorageManager = (cookies = \"\"): StorageManager => ({\n  get(init?) {\n    const match = cookies.match(new RegExp(`(^| )${storageKey}=([^;]+)`))\n\n    if (match) {\n      return match[2] as ColorMode\n    }\n\n    return init\n  },\n  set(value) {\n    document.cookie = `${storageKey}=${value}; max-age=31536000; path=/`\n  },\n  type: \"cookie\",\n})\n"],"file":"storage-manager.js"}
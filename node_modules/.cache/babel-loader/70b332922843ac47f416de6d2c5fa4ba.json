{"ast":null,"code":"import { onNextFrame, defaultTimestep } from './on-next-frame.js';\nimport { createRenderStep } from './create-render-step.js';\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = createRenderStep(function () {\n    return runNextFrame = true;\n  });\n  return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  var step = steps[key];\n\n  acc[key] = function (process, keepAlive, immediate) {\n    if (keepAlive === void 0) {\n      keepAlive = false;\n    }\n\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    if (!runNextFrame) startLoop();\n    return step.schedule(process, keepAlive, immediate);\n  };\n\n  return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = steps[key].cancel;\n  return acc;\n}, {});\nvar flushSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = function () {\n    return steps[key].process(frame);\n  };\n\n  return acc;\n}, {});\n\nvar processStep = function processStep(stepId) {\n  return steps[stepId].process(frame);\n};\n\nvar processFrame = function processFrame(timestamp) {\n  runNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n\n  if (runNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\n\nvar startLoop = function startLoop() {\n  runNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\n\nvar getFrameData = function getFrameData() {\n  return frame;\n};\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };","map":{"version":3,"sources":["/Users/lin/Documents/Projects/solana-explorer-tutorial/node_modules/framesync/dist/es/index.js"],"names":["onNextFrame","defaultTimestep","createRenderStep","maxElapsed","useDefaultElapsed","runNextFrame","isProcessing","frame","delta","timestamp","stepsOrder","steps","reduce","acc","key","sync","step","process","keepAlive","immediate","startLoop","schedule","cancelSync","cancel","flushSync","processStep","stepId","processFrame","Math","max","min","forEach","getFrameData"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,eAAtB,QAA6C,oBAA7C;AACA,SAASC,gBAAT,QAAiC,yBAAjC;AAEA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,iBAAiB,GAAG,IAAxB;AACA,IAAIC,YAAY,GAAG,KAAnB;AACA,IAAIC,YAAY,GAAG,KAAnB;AACA,IAAIC,KAAK,GAAG;AACRC,EAAAA,KAAK,EAAE,CADC;AAERC,EAAAA,SAAS,EAAE;AAFH,CAAZ;AAIA,IAAIC,UAAU,GAAG,CAAC,MAAD,EAAS,QAAT,EAAmB,WAAnB,EAAgC,QAAhC,EAA0C,YAA1C,CAAjB;AACA,IAAIC,KAAK,GAAG,aAAaD,UAAU,CAACE,MAAX,CAAkB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC3DD,EAAAA,GAAG,CAACC,GAAD,CAAH,GAAWZ,gBAAgB,CAAC,YAAY;AACpC,WAAOG,YAAY,GAAG,IAAtB;AACH,GAF0B,CAA3B;AAGA,SAAOQ,GAAP;AACH,CALwB,EAKtB,EALsB,CAAzB;AAMA,IAAIE,IAAI,GAAG,aAAaL,UAAU,CAACE,MAAX,CAAkB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC1D,MAAIE,IAAI,GAAGL,KAAK,CAACG,GAAD,CAAhB;;AACAD,EAAAA,GAAG,CAACC,GAAD,CAAH,GAAW,UAAUG,OAAV,EAAmBC,SAAnB,EAA8BC,SAA9B,EAAyC;AAChD,QAAID,SAAS,KAAK,KAAK,CAAvB,EAA0B;AACtBA,MAAAA,SAAS,GAAG,KAAZ;AACH;;AACD,QAAIC,SAAS,KAAK,KAAK,CAAvB,EAA0B;AACtBA,MAAAA,SAAS,GAAG,KAAZ;AACH;;AACD,QAAI,CAACd,YAAL,EAAmBe,SAAS;AAC5B,WAAOJ,IAAI,CAACK,QAAL,CAAcJ,OAAd,EAAuBC,SAAvB,EAAkCC,SAAlC,CAAP;AACH,GATD;;AAUA,SAAON,GAAP;AACH,CAbuB,EAarB,EAbqB,CAAxB;AAcA,IAAIS,UAAU,GAAG,aAAaZ,UAAU,CAACE,MAAX,CAAkB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChED,EAAAA,GAAG,CAACC,GAAD,CAAH,GAAWH,KAAK,CAACG,GAAD,CAAL,CAAWS,MAAtB;AACA,SAAOV,GAAP;AACH,CAH6B,EAG3B,EAH2B,CAA9B;AAIA,IAAIW,SAAS,GAAG,aAAad,UAAU,CAACE,MAAX,CAAkB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/DD,EAAAA,GAAG,CAACC,GAAD,CAAH,GAAW,YAAY;AACnB,WAAOH,KAAK,CAACG,GAAD,CAAL,CAAWG,OAAX,CAAmBV,KAAnB,CAAP;AACH,GAFD;;AAGA,SAAOM,GAAP;AACH,CAL4B,EAK1B,EAL0B,CAA7B;;AAMA,IAAIY,WAAW,GAAG,SAAdA,WAAc,CAAUC,MAAV,EAAkB;AAChC,SAAOf,KAAK,CAACe,MAAD,CAAL,CAAcT,OAAd,CAAsBV,KAAtB,CAAP;AACH,CAFD;;AAGA,IAAIoB,YAAY,GAAG,SAAfA,YAAe,CAAUlB,SAAV,EAAqB;AACpCJ,EAAAA,YAAY,GAAG,KAAf;AACAE,EAAAA,KAAK,CAACC,KAAN,GAAcJ,iBAAiB,GAAGH,eAAH,GAAqB2B,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAASrB,SAAS,GAAGF,KAAK,CAACE,SAA3B,EAAsCN,UAAtC,CAAT,EAA4D,CAA5D,CAApD;AACAI,EAAAA,KAAK,CAACE,SAAN,GAAkBA,SAAlB;AACAH,EAAAA,YAAY,GAAG,IAAf;AACAI,EAAAA,UAAU,CAACqB,OAAX,CAAmBN,WAAnB;AACAnB,EAAAA,YAAY,GAAG,KAAf;;AACA,MAAID,YAAJ,EAAkB;AACdD,IAAAA,iBAAiB,GAAG,KAApB;AACAJ,IAAAA,WAAW,CAAC2B,YAAD,CAAX;AACH;AACJ,CAXD;;AAYA,IAAIP,SAAS,GAAG,SAAZA,SAAY,GAAY;AACxBf,EAAAA,YAAY,GAAG,IAAf;AACAD,EAAAA,iBAAiB,GAAG,IAApB;AACA,MAAI,CAACE,YAAL,EAAmBN,WAAW,CAAC2B,YAAD,CAAX;AACtB,CAJD;;AAKA,IAAIK,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC3B,SAAOzB,KAAP;AACH,CAFD;;AAIA,eAAeQ,IAAf;AACA,SAASO,UAAT,EAAqBE,SAArB,EAAgCQ,YAAhC","sourcesContent":["import { onNextFrame, defaultTimestep } from './on-next-frame.js';\nimport { createRenderStep } from './create-render-step.js';\n\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = createRenderStep(function () {\n        return runNextFrame = true;\n    });\n    return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) {\n            keepAlive = false;\n        }\n        if (immediate === void 0) {\n            immediate = false;\n        }\n        if (!runNextFrame) startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar flushSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = function () {\n        return steps[key].process(frame);\n    };\n    return acc;\n}, {});\nvar processStep = function (stepId) {\n    return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n    return frame;\n};\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\n\nvar filterNested = function filterNested(nodes) {\n  var contained = new Set();\n  var l = nodes.length;\n\n  for (var i = 0; i < l; i += 1) {\n    for (var j = i + 1; j < l; j += 1) {\n      var position = nodes[i].compareDocumentPosition(nodes[j]);\n\n      if ((position & Node.DOCUMENT_POSITION_CONTAINED_BY) > 0) {\n        contained.add(j);\n      }\n\n      if ((position & Node.DOCUMENT_POSITION_CONTAINS) > 0) {\n        contained.add(i);\n      }\n    }\n  }\n\n  return nodes.filter(function (_, index) {\n    return !contained.has(index);\n  });\n};\n\nvar getTopParent = function getTopParent(node) {\n  return node.parentNode ? getTopParent(node.parentNode) : node;\n};\n\nexport var getAllAffectedNodes = function getAllAffectedNodes(node) {\n  var nodes = asArray(node);\n  return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n    var group = currentNode.getAttribute(FOCUS_GROUP);\n    acc.push.apply(acc, group ? filterNested(toArray(getTopParent(currentNode).querySelectorAll(\"[\" + FOCUS_GROUP + \"=\\\"\" + group + \"\\\"]:not([\" + FOCUS_DISABLED + \"=\\\"disabled\\\"])\"))) : [currentNode]);\n    return acc;\n  }, []);\n};","map":{"version":3,"sources":["/Users/lin/Documents/Projects/solana-explorer-tutorial/node_modules/focus-lock/dist/es2015/utils/all-affected.js"],"names":["FOCUS_DISABLED","FOCUS_GROUP","asArray","toArray","filterNested","nodes","contained","Set","l","length","i","j","position","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","add","DOCUMENT_POSITION_CONTAINS","filter","_","index","has","getTopParent","node","parentNode","getAllAffectedNodes","Boolean","reduce","acc","currentNode","group","getAttribute","push","apply","querySelectorAll"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,WAAzB,QAA4C,cAA5C;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,SAAjC;;AACA,IAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,KAAV,EAAiB;AAChC,MAAIC,SAAS,GAAG,IAAIC,GAAJ,EAAhB;AACA,MAAIC,CAAC,GAAGH,KAAK,CAACI,MAAd;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,CAApB,EAAuBE,CAAC,IAAI,CAA5B,EAA+B;AAC3B,SAAK,IAAIC,CAAC,GAAGD,CAAC,GAAG,CAAjB,EAAoBC,CAAC,GAAGH,CAAxB,EAA2BG,CAAC,IAAI,CAAhC,EAAmC;AAC/B,UAAIC,QAAQ,GAAGP,KAAK,CAACK,CAAD,CAAL,CAASG,uBAAT,CAAiCR,KAAK,CAACM,CAAD,CAAtC,CAAf;;AACA,UAAI,CAACC,QAAQ,GAAGE,IAAI,CAACC,8BAAjB,IAAmD,CAAvD,EAA0D;AACtDT,QAAAA,SAAS,CAACU,GAAV,CAAcL,CAAd;AACH;;AACD,UAAI,CAACC,QAAQ,GAAGE,IAAI,CAACG,0BAAjB,IAA+C,CAAnD,EAAsD;AAClDX,QAAAA,SAAS,CAACU,GAAV,CAAcN,CAAd;AACH;AACJ;AACJ;;AACD,SAAOL,KAAK,CAACa,MAAN,CAAa,UAAUC,CAAV,EAAaC,KAAb,EAAoB;AAAE,WAAO,CAACd,SAAS,CAACe,GAAV,CAAcD,KAAd,CAAR;AAA+B,GAAlE,CAAP;AACH,CAfD;;AAgBA,IAAIE,YAAY,GAAG,SAAfA,YAAe,CAAUC,IAAV,EAAgB;AAC/B,SAAOA,IAAI,CAACC,UAAL,GAAkBF,YAAY,CAACC,IAAI,CAACC,UAAN,CAA9B,GAAkDD,IAAzD;AACH,CAFD;;AAGA,OAAO,IAAIE,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAUF,IAAV,EAAgB;AAC7C,MAAIlB,KAAK,GAAGH,OAAO,CAACqB,IAAD,CAAnB;AACA,SAAOlB,KAAK,CAACa,MAAN,CAAaQ,OAAb,EAAsBC,MAAtB,CAA6B,UAAUC,GAAV,EAAeC,WAAf,EAA4B;AAC5D,QAAIC,KAAK,GAAGD,WAAW,CAACE,YAAZ,CAAyB9B,WAAzB,CAAZ;AACA2B,IAAAA,GAAG,CAACI,IAAJ,CAASC,KAAT,CAAeL,GAAf,EAAqBE,KAAK,GACpB1B,YAAY,CAACD,OAAO,CAACmB,YAAY,CAACO,WAAD,CAAZ,CAA0BK,gBAA1B,CAA2C,MAAMjC,WAAN,GAAoB,KAApB,GAA4B6B,KAA5B,GAAoC,WAApC,GAAkD9B,cAAlD,GAAmE,iBAA9G,CAAD,CAAR,CADQ,GAEpB,CAAC6B,WAAD,CAFN;AAGA,WAAOD,GAAP;AACH,GANM,EAMJ,EANI,CAAP;AAOH,CATM","sourcesContent":["import { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\nvar filterNested = function (nodes) {\n    var contained = new Set();\n    var l = nodes.length;\n    for (var i = 0; i < l; i += 1) {\n        for (var j = i + 1; j < l; j += 1) {\n            var position = nodes[i].compareDocumentPosition(nodes[j]);\n            if ((position & Node.DOCUMENT_POSITION_CONTAINED_BY) > 0) {\n                contained.add(j);\n            }\n            if ((position & Node.DOCUMENT_POSITION_CONTAINS) > 0) {\n                contained.add(i);\n            }\n        }\n    }\n    return nodes.filter(function (_, index) { return !contained.has(index); });\n};\nvar getTopParent = function (node) {\n    return node.parentNode ? getTopParent(node.parentNode) : node;\n};\nexport var getAllAffectedNodes = function (node) {\n    var nodes = asArray(node);\n    return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n        var group = currentNode.getAttribute(FOCUS_GROUP);\n        acc.push.apply(acc, (group\n            ? filterNested(toArray(getTopParent(currentNode).querySelectorAll(\"[\" + FOCUS_GROUP + \"=\\\"\" + group + \"\\\"]:not([\" + FOCUS_DISABLED + \"=\\\"disabled\\\"])\")))\n            : [currentNode]));\n        return acc;\n    }, []);\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.js';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.js';\nimport { isAnimatable } from './is-animatable.js';\nimport { getDefaultTransition } from './default-transitions.js';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.js';\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\n\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n\n  var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n\n  return !!Object.keys(transition).length;\n}\n\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\n\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n      times = _a.times,\n      yoyo = _a.yoyo,\n      flip = _a.flip,\n      loop = _a.loop,\n      transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n\n  var options = __assign({}, transition);\n\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n\n\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n\n  if (yoyo || loop || flip) {\n    warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n\n\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\n\n\nfunction getDelayFromTransition(transition, key) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\n\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = __spreadArray([], __read(options.to));\n    options.to[0] = options.from;\n  }\n\n  return options;\n}\n\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n\n  if (!isTransitionDefined(transition)) {\n    transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n\n  return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\n\n\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n\n  var isOriginAnimatable = isAnimatable(key, origin);\n  warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? inertia(__assign(__assign({}, options), valueTransition)) : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n\n  function set() {\n    var _a;\n\n    value.set(target);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\n\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\n\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\n\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\n\n\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n\n    var start = function start() {\n      return controls = animation();\n    };\n\n    if (delay) {\n      delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };","map":{"version":3,"sources":["/Users/lin/Documents/Projects/solana-explorer-tutorial/node_modules/framer-motion/dist/es/animation/utils/transitions.js"],"names":["__assign","__rest","__spreadArray","__read","inertia","animate","secondsToMilliseconds","isEasingArray","easingDefinitionToFunction","isAnimatable","getDefaultTransition","warning","getAnimatableNone","isTransitionDefined","_a","when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","transition","Object","keys","length","legacyRepeatWarning","convertTransitionToAnimationOptions","ease","times","yoyo","flip","loop","options","duration","map","type","getDelayFromTransition","key","valueTransition","getValueTransition","hydrateKeyframes","Array","isArray","to","getPopmotionAnimationOptions","getAnimation","value","target","onComplete","origin","get","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","start","velocity","getVelocity","onUpdate","v","set","call","stop","parseFloat","indexOf","potentialUnitType","startAnimation","delayTimer","controls","animation","setTimeout","clearTimeout"],"mappings":"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","sourcesContent":["import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.js';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.js';\nimport { isAnimatable } from './is-animatable.js';\nimport { getDefaultTransition } from './default-transitions.js';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.js';\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n    _a.when; _a.delay; _a.delayChildren; _a.staggerChildren; _a.staggerDirection; _a.repeat; _a.repeatType; _a.repeatDelay; _a.from; var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n    return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n    var ease = _a.ease, times = _a.times, yoyo = _a.yoyo, flip = _a.flip, loop = _a.loop, transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n    var options = __assign({}, transition);\n    if (times)\n        options[\"offset\"] = times;\n    /**\n     * Convert any existing durations from seconds to milliseconds\n     */\n    if (transition.duration)\n        options[\"duration\"] = secondsToMilliseconds(transition.duration);\n    if (transition.repeatDelay)\n        options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n    /**\n     * Map easing names to Popmotion's easing functions\n     */\n    if (ease) {\n        options[\"ease\"] = isEasingArray(ease)\n            ? ease.map(easingDefinitionToFunction)\n            : easingDefinitionToFunction(ease);\n    }\n    /**\n     * Support legacy transition API\n     */\n    if (transition.type === \"tween\")\n        options.type = \"keyframes\";\n    /**\n     * TODO: These options are officially removed from the API.\n     */\n    if (yoyo || loop || flip) {\n        warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n        legacyRepeatWarning = true;\n        if (yoyo) {\n            options.repeatType = \"reverse\";\n        }\n        else if (loop) {\n            options.repeatType = \"loop\";\n        }\n        else if (flip) {\n            options.repeatType = \"mirror\";\n        }\n        options.repeat = loop || yoyo || flip || transition.repeat;\n    }\n    /**\n     * TODO: Popmotion 9 has the ability to automatically detect whether to use\n     * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n     * It'd be good to introduce a similar thing here.\n     */\n    if (transition.type !== \"spring\")\n        options.type = \"keyframes\";\n    return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key) || {};\n    return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\nfunction hydrateKeyframes(options) {\n    if (Array.isArray(options.to) && options.to[0] === null) {\n        options.to = __spreadArray([], __read(options.to));\n        options.to[0] = options.from;\n    }\n    return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n    var _a;\n    if (Array.isArray(options.to)) {\n        (_a = transition.duration) !== null && _a !== void 0 ? _a : (transition.duration = 0.8);\n    }\n    hydrateKeyframes(options);\n    /**\n     * Get a default transition if none is determined to be defined.\n     */\n    if (!isTransitionDefined(transition)) {\n        transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n    }\n    return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key);\n    var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n    var isTargetAnimatable = isAnimatable(key, target);\n    if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n        /**\n         * If we're trying to animate from \"none\", try and get an animatable version\n         * of the target. This could be improved to work both ways.\n         */\n        origin = getAnimatableNone(key, target);\n    }\n    else if (isZero(origin) && typeof target === \"string\") {\n        origin = getZeroUnit(target);\n    }\n    else if (!Array.isArray(target) &&\n        isZero(target) &&\n        typeof origin === \"string\") {\n        target = getZeroUnit(origin);\n    }\n    var isOriginAnimatable = isAnimatable(key, origin);\n    warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n    function start() {\n        var options = {\n            from: origin,\n            to: target,\n            velocity: value.getVelocity(),\n            onComplete: onComplete,\n            onUpdate: function (v) { return value.set(v); },\n        };\n        return valueTransition.type === \"inertia\" ||\n            valueTransition.type === \"decay\"\n            ? inertia(__assign(__assign({}, options), valueTransition))\n            : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), { onUpdate: function (v) {\n                    var _a;\n                    options.onUpdate(v);\n                    (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n                }, onComplete: function () {\n                    var _a;\n                    options.onComplete();\n                    (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n                } }));\n    }\n    function set() {\n        var _a;\n        value.set(target);\n        onComplete();\n        (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n        return { stop: function () { } };\n    }\n    return !isOriginAnimatable ||\n        !isTargetAnimatable ||\n        valueTransition.type === false\n        ? set\n        : start;\n}\nfunction isZero(value) {\n    return (value === 0 ||\n        (typeof value === \"string\" &&\n            parseFloat(value) === 0 &&\n            value.indexOf(\" \") === -1));\n}\nfunction getZeroUnit(potentialUnitType) {\n    return typeof potentialUnitType === \"number\"\n        ? 0\n        : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n    return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\nfunction startAnimation(key, value, target, transition) {\n    if (transition === void 0) { transition = {}; }\n    return value.start(function (onComplete) {\n        var delayTimer;\n        var controls;\n        var animation = getAnimation(key, value, target, transition, onComplete);\n        var delay = getDelayFromTransition(transition, key);\n        var start = function () { return (controls = animation()); };\n        if (delay) {\n            delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n        }\n        else {\n            start();\n        }\n        return function () {\n            clearTimeout(delayTimer);\n            controls === null || controls === void 0 ? void 0 : controls.stop();\n        };\n    });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };\n"]},"metadata":{},"sourceType":"module"}